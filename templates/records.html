{% extends "base.html" %}

{% block title %}World Records - Ham Radio Olympics{% endblock %}

{% block content %}
<h2>World Records</h2>

{% if world_records %}
<h3>Overall Records</h3>
<div class="table-responsive"><table>
    <thead>
        <tr>
            <th scope="col">Record Type</th>
            <th scope="col">Value</th>
            <th scope="col">Holder</th>
            <th scope="col">QSO With</th>
            <th scope="col">Mode</th>
            <th scope="col">Match</th>
            <th scope="col">Date</th>
        </tr>
    </thead>
    <tbody>
        {% for record in world_records %}
        <tr>
            <td><strong>{{ record.record_type | replace('_', ' ') | title }}</strong></td>
            <td>
                {% if 'distance' in record.record_type %}
                    {{ "%.1f" | format(record.value) }} km
                {% elif 'cool_factor' in record.record_type %}
                    {{ "%.1f" | format(record.value) }} km/W
                {% elif 'power' in record.record_type %}
                    {{ "%.1f" | format(record.value) }} W
                {% else %}
                    {{ record.value }}
                {% endif %}
            </td>
            <td>
                {% if record.holder %}
                    <a href="/competitor/{{ record.holder }}">{{ record.holder_first_name | competitor_display(record.holder) }}</a>
                {% else %}
                    -
                {% endif %}
            </td>
            <td>{{ record.dx_callsign or '-' }}</td>
            <td>{{ record.mode or '-' }}</td>
            <td>
                {% if record.match_id %}
                    <a href="/olympiad/sport/{{ record.linked_sport_id }}/match/{{ record.match_id }}">{{ record.sport_name }}: {{ record.target_value | pota_tooltip }}</a>
                {% else %}
                    -
                {% endif %}
            </td>
            <td>{{ record.achieved_at | format_date if record.achieved_at else '-' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table></div>
{% else %}
<div class="card">
    <p>No world records have been set yet. Be the first to set a record!</p>
</div>
{% endif %}

{% if distance_records %}
<h3>Distance Records by Mode</h3>
<div class="table-responsive"><table>
    <thead>
        <tr>
            <th scope="col">Mode</th>
            <th scope="col">Distance</th>
            <th scope="col">Holder</th>
            <th scope="col">Match</th>
            <th scope="col">Date</th>
        </tr>
    </thead>
    <tbody>
        {% for record in distance_records %}
        <tr>
            <td><strong>{{ record.mode }}</strong></td>
            <td>{{ "%.1f" | format(record.value) }} km</td>
            <td>
                <a href="/competitor/{{ record.holder }}">{{ record.holder_name | competitor_display(record.holder) }}</a>
            </td>
            <td>
                <a href="/olympiad/sport/{{ record.sport_id }}/match/{{ record.match_id }}">{{ record.sport_name }}: {{ record.target | pota_tooltip }}</a>
            </td>
            <td>{{ record.date | format_date if record.date else '-' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table></div>
{% endif %}

{% if cool_factor_records %}
<h3>Cool Factor Records by Mode</h3>
<div class="table-responsive"><table>
    <thead>
        <tr>
            <th scope="col">Mode</th>
            <th scope="col">Cool Factor</th>
            <th scope="col">Holder</th>
            <th scope="col">Match</th>
            <th scope="col">Date</th>
        </tr>
    </thead>
    <tbody>
        {% for record in cool_factor_records %}
        <tr>
            <td><strong>{{ record.mode }}</strong></td>
            <td>{{ "%.1f" | format(record.value) }} km/W</td>
            <td>
                <a href="/competitor/{{ record.holder }}">{{ record.holder_name | competitor_display(record.holder) }}</a>
            </td>
            <td>
                <a href="/olympiad/sport/{{ record.sport_id }}/match/{{ record.match_id }}">{{ record.sport_name }}: {{ record.target | pota_tooltip }}</a>
            </td>
            <td>{{ record.date | format_date if record.date else '-' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table></div>
{% endif %}

<h3>About Records</h3>
<div class="card">
    <p><strong>Distance Records:</strong> Longest confirmed QSO distance in kilometers.</p>
    <p><strong>Cool Factor Records:</strong> Best distance-to-power ratio (km/W) - rewards efficient, low-power contacts.</p>
</div>
{% endblock %}
